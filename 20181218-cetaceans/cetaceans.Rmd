---
title: "TidyTuesday: Cetaceans Dataset"
output: html_notebook
editor_options: 
  chunk_output_type: console
---

Analyzing data for #tidytuesday week of 12/18/2018

source: https://github.com/rfordatascience/tidytuesday/tree/master/data/2018-12-18

```{r}
# load packages and parse data
library(tidyverse)
library(scales)
library(RColorBrewer)
library(forcats)
library(lubridate)
library(ebbr)

cetaceans_raw <- read_csv("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2018-12-18/allCetaceanData.csv")

cetaceans <- cetaceans_raw
```


```{r}
cetaceans_age <- cetaceans %>% 
  select(species, sex, acquisition, status, birthYear, originDate, statusDate) %>% 
  mutate(statusDate = replace_na(statusDate, "2017-05-07"), # BASED ON DATA DICTIONARY
         statusYear = year(statusDate),
         originYear = year(originDate),
         birthYear = year(as.Date(birthYear, format = "%Y")),
         age_years = statusYear - birthYear) %>%
  filter(age_years >= 0)


### average life span
cetaceans_age %>% 
  group_by(species) %>% 
  filter(status == 'Died', acquisition == 'Capture') %>% 
  View()

# up next: group birth years by decade for better segmentation of analysis

```



